(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/wechat"],{"08b8":function(e,t,o){"use strict";(function(e){o("1583");r(o("66fd"));var t=r(o("9ec0"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},"295a":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return r}));var r={quiPage:function(){return Promise.all([o.e("common/vendor"),o.e("components/qui-page/qui-page")]).then(o.bind(null,"716f"))}},n=function(){var e=this,t=e.$createElement;e._self._c},a=[]},"9ec0":function(e,t,o){"use strict";o.r(t);var r=o("295a"),n=o("a53c");for(var a in n)"default"!==a&&function(e){o.d(t,e,(function(){return n[e]}))}(a);var i,s=o("f0c5"),u=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);t["default"]=u.exports},a53c:function(e,t,o){"use strict";o.r(t);var r=o("c1ab"),n=o.n(r);for(var a in r)"default"!==a&&function(e){o.d(t,e,(function(){return r[e]}))}(a);t["default"]=n.a},c1ab:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(o("72b9")),n=u(o("04de")),a=u(o("1870")),i=u(o("13a0")),s=o("eb2d");function u(e){return e&&e.__esModule?e:{default:e}}var d={mixins:[r.default,n.default,a.default,i.default],data:function(){return{state:!0}},onLoad:function(e){},methods:{wxLogin:function(t){var o=this;this.$store.dispatch("session/noSenseh5Login",t).then((function(t){if(console.log(t,o.forums,"注册"),o.forums&&o.forums.set_site&&"1"===o.forums.set_site.open_ext_fields&&t&&t.new_user)o.jump2RegisterExtendPage();else if(t&&t.data&&t.data.data&&t.data.data.id){if(o.logind(),o.forums&&o.forums.set_site&&o.forums.set_site.site_mode!==s.SITE_PAY){e.getStorage({key:"page",success:function(t){e.redirectTo({url:t.data})}});var r=e.getStorageSync("isBind");r?e.showToast({title:"绑定成功",duration:2e3}):e.showToast({title:"登录成功",duration:2e3})}else if(o.forums&&o.forums.set_site&&o.forums.set_site.site_mode===s.SITE_PAY&&o.user&&!o.user.paid){e.redirectTo({url:"/pages/site/info"});var n=e.getStorageSync("isBind");n?e.showToast({title:"绑定成功",duration:2e3}):e.showToast({title:"登录成功",duration:2e3})}}else{if(t&&t.data&&t.data.errors){if("no_bind_user"===t.data.errors[0].code){var a={headimgurl:t.data.errors[0].user.headimgurl,username:t.data.errors[0].user.nickname};e.setStorageSync("token",t.data.errors[0].token),e.setStorageSync("userInfo",a),e.setStorageSync("isBind",!0),o.jump2RegisterBindPage()}"permission_denied"===t.data.errors[0].code&&o.login(),"register_validate"===t.data.errors[0].code&&e.showToast({icon:"none",title:o.i18n.t("core.register_validate"),duration:2e3}),"validate_reject"===t.data.errors[0].code&&e.showToast({icon:"none",title:o.i18n.t("core.validate_reject"),duration:2e3}),"register_close"===t.data.errors[0].code&&e.showToast({icon:"none",title:o.i18n.t("core.register_close"),duration:2e3}),"ban_user"===t.data.errors[0].code&&e.showToast({icon:"none",title:o.i18n.t("core.ban_user"),duration:2e3}),"account_has_been_bound"===t.data.errors[0].code&&e.getStorage({key:"page",success:function(t){e.redirectTo({url:t.data}),setTimeout((function(){e.showToast({icon:"none",title:"用户或微信已绑定",duration:2e3})}),1e3)}}),"rebind_mp_wechat"===t.data.errors[0].code&&(e.setStorageSync("token",t.data.errors[0].token),e.redirectTo({url:"/pages/user/login-bind"}))}e.redirectTo({url:"/"}),setTimeout((function(){e.showToast({icon:"none",title:"未知错误".concat(t.data.errors[0].code),duration:2e3})}),500)}})).catch((function(t){e.redirectTo({url:"/"}),setTimeout((function(){e.showToast({icon:"none",title:t.message,duration:2e3})}),500)}))}}};t.default=d}).call(this,o("543d")["default"])}},[["08b8","common/runtime","common/vendor"]]]);