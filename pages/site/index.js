(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/site/index"],{1032:function(e,t,n){"use strict";n.r(t);var i=n("fe64"),r=n("965e");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("5971");var s,u=n("f0c5"),a=Object(u["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);t["default"]=a.exports},"4c66":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n("04de")),r=n("2f62"),o=n("eb2d");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={mixins:[i.default],data:function(){return{version:o.VERSION,title:this.i18n.t("manage.circleinfo"),shareBtn:"icon-share1",isWeixin:"",shareShow:!1}},onLoad:function(){this.getSiteInfo(),this.getPermissions(),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},onShareAppMessage:function(e){return e.from,{title:this.forums.set_site.site_name}},onShareTimeline:function(){return{title:this.forums.set_site.site_name,query:""}},computed:a({currentLoginId:function(){var e=this.$store.getters["session/get"]("userId");return parseInt(e,10)},siteInfo:function(){var e=this.$store.getters["jv/get"]("forums/1");return e&&e.other&&(e.count_users=e.other.count_users,e.count_threads=e.other.count_threads),e&&e.set_site&&(e.site_introduction=e.set_site.site_introduction,e.set_site.site_install&&(e.createdAt=e.set_site.site_install.slice(0,10))),e&&e.set_site&&e.set_site.site_author&&(e.avatar=e.set_site.site_author.avatar,e.username=e.set_site.site_author.username,e.userId=e.set_site.site_author.id),e},userInfo:function(){var e=this.$store.getters["jv/get"]("users/".concat(this.currentLoginId));return e&&e.joinedAt&&(e.joinedTime=e.joinedAt.slice(0,10)),e&&e.expiredAt?e.expiredTime=e.expiredAt.substr(0,10):e.expiredTime=this.i18n.t("site.permanent"),e&&e.groups&&e.groups.length>0&&(e.groupName=e.groups[0].name),e},permissionInfo:function(){var e=[],t=this.$store.getters["jv/get"]("users/".concat(this.currentLoginId)),n=this.$store.getters["jv/get"]("groups"),i=Object.keys(n);if(n&&i.length>0)for(var r=function(r){var o=n[i[r]];t&&t.groups&&Object.keys(t.groups)&&o._jv&&t.groups&&t.groups.length>0&&o._jv.id===t.groups[0]._jv.id&&o.permission&&(e=Object.keys(o.permission).map((function(e){return o.permission[e].permission})))},o=0;o<i.length;o+=1)r(o);return e}},(0,r.mapState)({footerIndex:function(e){return e.footerTab.footerIndex}})),methods:a(a({getSiteInfo:function(){var e={include:["users"]};this.$store.dispatch("jv/get",["forum",{params:e}]).then((function(e){console.log(e)}))},getPermissions:function(){var e={"filter[type]":"invite",include:["permission"]};this.$store.dispatch("jv/get",["groups",{params:e}]).then((function(e){console.log(e)}))},open:function(){this.$refs.popupHead.open()},closeShare:function(){this.shareShow=!1},cancel:function(){this.$refs.popupHead.close()}},(0,r.mapMutations)({setFooterIndex:"footerTab/SET_FOOTERINDEX"})),{},{logoClick:function(){this.setFooterIndex(parseInt(0,10)),e.redirectTo({url:"/pages/home/index"})},jumpUserPage:function(t){t&&e.navigateTo({url:"/pages/profile/index?userId=".concat(t)})}})};t.default=f}).call(this,n("543d")["default"])},5971:function(e,t,n){"use strict";var i=n("f7f2"),r=n.n(i);r.a},"965e":function(e,t,n){"use strict";n.r(t);var i=n("4c66"),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a},f7f2:function(e,t,n){},fb65:function(e,t,n){"use strict";(function(e){n("1583");i(n("66fd"));var t=i(n("1032"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},fe64:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={quiPage:function(){return Promise.all([n.e("common/vendor"),n.e("components/qui-page/qui-page")]).then(n.bind(null,"716f"))},quiHeader:function(){return n.e("components/qui-header/qui-header").then(n.bind(null,"9b58"))},uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"a5b1"))},quiShare:function(){return Promise.all([n.e("common/vendor"),n.e("components/qui-share/qui-share")]).then(n.bind(null,"1ee9"))},quiCellItem:function(){return n.e("components/qui-cell-item/qui-cell-item").then(n.bind(null,"328d"))},quiAvatar:function(){return Promise.all([n.e("common/vendor"),n.e("components/qui-avatar/qui-avatar")]).then(n.bind(null,"b6d9"))}},r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.i18n.t("home.theme")),i=e.$u.light(),r=e.i18n.t("manage.siteintroduction"),o=e.i18n.t("manage.creationtime"),s=e.i18n.t("manage.circlemode"),u=e.siteInfo.set_site&&"public"===e.siteInfo.set_site.site_mode?e.i18n.t("manage.publicmode"):null,a=e.siteInfo.set_site&&"public"===e.siteInfo.set_site.site_mode?null:e.i18n.t("manage.paymentmode"),c=e.i18n.t("manage.circlemaster"),f={username:e.siteInfo.username,avatarUrl:e.siteInfo.avatar},l=e.i18n.t("home.theme"),p=e.i18n.t("manage.myRole"),m=e.siteInfo.set_site&&"pay"===e.siteInfo.set_site.site_mode&&e.userInfo.joinedAt?e.i18n.t("manage.joinedTime"):null,d=e.siteInfo.set_site&&"pay"===e.siteInfo.set_site.site_mode?e.i18n.t("manage.periodvalidity"):null,g=e.i18n.t("manage.version"),h=e.i18n.t("site.myauthority"),_=e.__map(e.permissionInfo,(function(t,n){var i=e.__get_orig(t),r=e.i18n.t("permission."+t.replace(/\./g,"_"));return{$orig:i,g14:r}}));e.$mp.data=Object.assign({},{$root:{g0:n,g1:i,g2:r,g3:o,g4:s,g5:u,g6:a,g7:c,a0:f,g8:l,g9:p,g10:m,g11:d,g12:g,g13:h,l0:_}})},o=[]}},[["fb65","common/runtime","common/vendor"]]]);