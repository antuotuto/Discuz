(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/qui-footer/qui-footer"],{"18e4":function(t,e,o){"use strict";o.r(e);var n=o("f6d0"),i=o("ca16");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("c991");var s,r=o("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=c.exports},"649a":function(t,e,o){},c991:function(t,e,o){"use strict";var n=o("649a"),i=o.n(n);i.a},ca16:function(t,e,o){"use strict";o.r(e);var n=o("f51f"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},f51f:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(o("04de")),i=c(o("72b9")),a=o("2f62"),s=c(o("13a0")),r=o("eb2d");function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function h(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?u(Object(o),!0).forEach((function(e){p(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function p(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var d=function(){o.e("components/uni-popup/uni-popup-dialog").then(function(){return resolve(o("389f"))}.bind(null,o)).catch(o.oe)},f={components:{uniPopupDialog:d},mixins:[n.default,i.default,s.default],props:{bottom:{type:Number,default:0}},data:function(){return{sel:1,type:"",tabs:[{tabsName:"home.tabsCircle",tabsIcon:"icon-home",id:1,url:"/pages/home/index"},{tabsName:"home.find",tabsIcon:"icon-faxian",id:2,url:"/pages/find/index"},{tabsName:"home.tabsNews",tabsIcon:"icon-message",id:3,url:"/pages/notice/index"},{tabsName:"home.tabsMy",tabsIcon:"icon-mine",id:4,url:"/pages/my/index"}],bottomData:[],bottomDataLength:0,isTabBar:[0],sureType:"",sureTip:"",url:"",formData:{},uploadStatus:!0,isWeixin:"",isiOS:"",uploadImgMax:9}},computed:h(h({},(0,a.mapState)({getCategoryId:function(t){return t.session.categoryId},getCategoryIndex:function(t){return t.session.categoryIndex},footerIndex:function(t){return t.footerTab.footerIndex?parseInt(t.footerTab.footerIndex,10):0}})),{},{redCircle:function(){return this.user.unreadNotifications}}),created:function(){var e=this,o=getCurrentPages().length;if(o>0){var n=getCurrentPages()[o-1].is,i=n&&n.split("pages/")[1];i&&(this.tabs=this.tabs.map((function(t){var o=e.i18n.t(t.tabsName);t.url&&t.url.includes(i)&&(e.sel=t.id);var n=h(h({},t),{},{tabsName:o});return n})))}this.url=r.DISCUZ_REQUEST_HOST,this.formData={type:1};var a=[],s=0,c=1;t.$on("uploadLength",(function(t){c=t})),t.$on("uploadFail",(function(){s+=1}));var u=0;t.$on("uploadOver",(function(o){var n;t.showLoading({title:e.i18n.t("core.loading"),mask:!0}),n=0===e.footerIndex?"/topic/post?type=3&categoryId=".concat(e.getCategoryId,"&categoryIndex=").concat(e.getCategoryIndex):"/topic/post?type=3",a.push(o.data),a.map((function(t,o){return t.data.attributes.order>e.uploadImgMax&&a.splice(o,1),a})),u=o.times,u+s>=c&&t.navigateTo({url:n,success:function(t){t.eventChannel.emit("acceptDataFromOpenerPage",a.sort(e.compare("order"))),s=0,c=1,a=[]}})}))},methods:h(h({select:function(t,e){this.$store.getters["session/get"]("isLogin")&&this.setFooterIndex(parseInt(e,10)),this.$emit("click",t,e,this.isTabBar),this.sel=t.id}},(0,a.mapMutations)({setFooterIndex:"footerTab/SET_FOOTERINDEX"})),{},{footerOpen:function(){if(this.$store.getters["session/get"]("isLogin")||(t.setStorage({key:"page",data:"/pages/home/index"}),this.mpLoginMode()),this.forums.other.publish_need_real_name)return this.sureTip=this.i18n.t("home.needRealname"),this.$refs.surePopup.open(),void(this.sureType="0");if(this.forums.other.publish_need_bind_phone)return this.sureTip=this.i18n.t("home.needPhone"),this.$refs.surePopup.open(),void(this.sureType="1");if(this.forums.other.can_create_thread_in_category){if(this.getCategoryId){var e=this.$store.getters["jv/get"]("categories/".concat(this.getCategoryId));e.canCreateThread||this.$refs.toast.show({message:this.i18n.t("home.noPostingPermission")})}this.forums.other.can_create_thread||this.forums.other.can_create_thread_long||this.forums.other.can_create_thread_video||this.forums.other.can_create_thread_image||this.forums.other.can_create_thread_question||this.forums.other.can_create_thread_audio||this.forums.other.can_create_thread_goods?(this.bottomData=[],this.forums.other.can_create_thread&&this.bottomData.push({text:this.i18n.t("home.word"),icon:"icon-word",name:"text",type:0}),this.forums.other.can_create_thread_long&&this.bottomData.push({text:this.i18n.t("home.invitation"),icon:"icon-post",name:"post",type:1}),this.forums.other.can_create_thread_image&&this.bottomData.push({text:this.i18n.t("home.picture"),icon:"icon-img",name:"image",type:3}),this.forums.other.can_create_thread_audio&&this.bottomData.push({text:this.i18n.t("home.audio"),icon:"icon-record",name:"audio",type:4}),this.forums.other.can_create_thread_video&&this.bottomData.push({text:this.i18n.t("home.video"),icon:"icon-video",name:"video",type:2}),this.forums.other.can_create_thread_goods&&this.bottomData.push({text:this.i18n.t("home.good"),icon:"icon-good",name:"good",type:6}),this.forums.other.can_create_thread_question&&this.bottomData.push({text:this.i18n.t("home.questions"),icon:"icon-question",name:"questions",type:5}),this.bottomDataLength=this.bottomData.length,this.$refs.popup.open()):this.$refs.toast.show({message:this.i18n.t("home.noPostingPermission")})}else this.$refs.toast.show({message:this.i18n.t("home.noPostingPermission")})},compare:function(t){return function(e,o){var n=e.data.attributes[t],i=o.data.attributes[t];return n>i?1:n<i?-1:0}},handleClick:function(e){var o,n=this;if(6===e.type)return t.navigateTo({url:"/pages/topic/parse-goods?type=".concat(e.type)}),void this.$refs.popup.close();if(this.isWeixin&&this.isiOS&&4===e.type)this.$refs.toast.show({message:this.i18n.t("discuzq.post.IOSWxNotRecordAudio")});else{if(5===e.type)return t.navigateTo({url:"/pages/user/at-member?name=select&categoryId=".concat(this.getCategoryId,"&categoryIndex=").concat(this.getCategoryIndex)}),void this.$refs.popup.close();if(0===this.footerIndex&&(o="/topic/post?type=".concat(e.type,"&categoryId=").concat(this.getCategoryId,"&categoryIndex=").concat(this.getCategoryIndex)),3===e.type){if(!this.forums.other.can_upload_images)return void this.$refs.toast.show({message:this.i18n.t("home.NoPermissionToUploadPictures")});this.$nextTick((function(){n.$refs.upload.uploadClick()})),this.cancel()}else 2===e.type?(this.$nextTick((function(){n.$refs.uploadVideo.uploadVideo()})),t.$on("uploadVideoOver",(function(i){o=0===n.footerIndex?"/topic/post?type=".concat(e.type,"&categoryId=").concat(n.getCategoryId,"&categoryIndex=").concat(n.getCategoryIndex):"/topic/post?type=".concat(e.type),t.navigateTo({url:o,success:function(t){t.eventChannel.emit("acceptDataFromOpenerPage",{data:i})}}),n.cancel()}))):(o=0===this.footerIndex?"/topic/post?type=".concat(e.type,"&categoryId=").concat(this.getCategoryId,"&categoryIndex=").concat(this.getCategoryIndex):"/topic/post?type=".concat(e.type),t.navigateTo({url:o}),this.cancel())}},jumpAndUploadImg:function(){},cancel:function(){this.$refs.popup.close()},close:function(){this.$refs.auth.close()},handleClickOk:function(){this.$refs.surePopup.close(),"0"===this.sureType?t.navigateTo({url:"/pages/modify/realname?id=".concat(this.user.id)}):"1"===this.sureType&&this.user&&""===this.user.mobile&&this.$refs.authPhone.open()},handleClickCancel:function(){this.$refs.surePopup.close()},closeDialog:function(){this.$refs.authPhone.close()}})};e.default=f}).call(this,o("543d")["default"])},f6d0:function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}));var n={quiIcon:function(){return o.e("components/qui-icon/qui-icon").then(o.bind(null,"708e"))},uniPopup:function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"a5b1"))},quiToast:function(){return o.e("components/qui-toast/qui-toast").then(o.bind(null,"91e7"))},quiAuthPhone:function(){return Promise.all([o.e("common/vendor"),o.e("components/qui-auth-phone/qui-auth-phone")]).then(o.bind(null,"c273"))},quiUploader:function(){return Promise.all([o.e("common/vendor"),o.e("components/qui-uploader/qui-uploader")]).then(o.bind(null,"2725"))},quiUploadVideo:function(){return Promise.all([o.e("common/vendor"),o.e("components/qui-upload-video/qui-upload-video")]).then(o.bind(null,"92e5"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.i18n.t("home.cancel"));t.$mp.data=Object.assign({},{$root:{g0:o}})},a=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/qui-footer/qui-footer-create-component',
    {
        'components/qui-footer/qui-footer-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("18e4"))
        })
    },
    [['components/qui-footer/qui-footer-create-component']]
]);
